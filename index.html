<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freeman -- Builder</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/lib/marked.umd.js"></script>
    <style>
        :root {
            --primary-bg: #1a1a1a;
            --secondary-bg: #2a2a2a;
            --accent-bg: #3a3a3a;
            --border-color: #333;
            --text-color: #c0c0c0;
            --text-muted: #666;
            --text-dim: #888;
            --accent-green: #00ff00;
            --accent-cyan: #00ffff;
            --error-color: #ff6b6b;
            --font-mono: 'Courier New', monospace;
            --border-radius: 3px;
            --transition: all 0.2s;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-mono);
            background-color: var(--primary-bg);
            color: var(--text-color);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            margin-bottom: 2rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 1rem;
        }

        .header h1 {
            color: var(--accent-green);
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .header .subtitle {
            color: var(--text-muted);
            font-size: 1rem;
        }

        .navbar {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 2rem;
            overflow-x: auto;
        }

        .tab {
            padding: 0.75rem 1.5rem;
            background: var(--secondary-bg);
            color: var(--text-dim);
            border: 1px solid var(--border-color);
            border-bottom: none;
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
            font-family: var(--font-mono);
            font-size: 0.9rem;
        }

        .tab:hover {
            background: var(--accent-bg);
            color: var(--text-color);
        }

        .tab.active {
            background: var(--primary-bg);
            color: var(--accent-cyan);
            border-color: var(--accent-cyan);
        }

        .tab-content {
            display: none;
            min-height: 400px;
            animation: fadeIn 0.3s ease-in-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section {
            margin-bottom: 2rem;
        }

        .section h2 {
            color: #00ffff;
            font-size: 1.2rem;
            margin-bottom: 1rem;
            border-left: 3px solid #00ffff;
            padding-left: 0.5rem;
        }

        .section h3 {
            color: #00ff00;
            font-size: 1.1rem;
            margin-bottom: 0.8rem;
            margin-top: 1.5rem;
            border-left: 2px solid #00ff00;
            padding-left: 0.5rem;
        }

        .section p, .section li {
            margin-bottom: 0.5rem;
        }

        .section ul {
            list-style: none;
            padding-left: 1rem;
        }

        .section li:before {
            content: "â†’ ";
            color: #00ff00;
        }


        .highlight {
            background: #333;
            padding: 2px 4px;
            border-radius: 2px;
        }

        .link {
            color: #00ffff;
            text-decoration: none;
            cursor: pointer;
        }

        .link:hover {
            text-decoration: underline;
        }


        @media (max-width: 600px) {
            .container {
                padding: 1rem;
            }
        }


        .blog-sidebar {
            position: fixed;
            top: 0;
            right: -50%;
            width: 50%;
            height: 100vh;
            background: #1a1a1a;
            border-left: 1px solid #333;
            z-index: 2000;
            transition: right 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .blog-sidebar.active {
            right: 0;
        }

        .sidebar-header {
            background: #2a2a2a;
            padding: 1rem;
            border-bottom: 1px solid #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sidebar-header h3 {
            color: #00ffff;
            margin: 0;
            font-size: 1.1rem;
        }

        .sidebar-controls {
            display: flex;
            gap: 0.5rem;
        }

        .sidebar-btn {
            background: #333;
            color: #c0c0c0;
            border: 1px solid #555;
            padding: 0.3rem 0.8rem;
            border-radius: 3px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            transition: all 0.2s;
        }

        .sidebar-btn:hover {
            background: #555;
            color: #00ffff;
        }

        .sidebar-content {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            overflow-x: hidden;
            color: #c0c0c0;
            font-family: 'Courier New', monospace;
            line-height: 1.6;
            max-height: calc(100vh - 120px); /* Ensure it doesn't exceed viewport */
            -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
            scroll-behavior: smooth;
        }

        .sidebar-content h1,
        .sidebar-content h2,
        .sidebar-content h3 {
            color: #00ffff;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .sidebar-content p {
            margin-bottom: 1rem;
        }

        .sidebar-content a {
            color: #00ff00;
            text-decoration: none;
        }

        .sidebar-content a:hover {
            text-decoration: underline;
        }

        .file-item {
            cursor: pointer;
            padding: 0.5rem;
            margin: 0.2rem 0;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .file-item:hover {
            background-color: var(--border-color);
        }

        /* Maintain backward compatibility */
        .blog-file-item,
        .config-file-item,
        .project-file-item {
            cursor: pointer;
            padding: 0.5rem;
            margin: 0.2rem 0;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .blog-file-item:hover,
        .config-file-item:hover,
        .project-file-item:hover {
            background-color: var(--border-color);
        }

        .container.sidebar-open {
            margin-right: 50%;
        }

        .fullscreen-article {
            max-width: 800px;
            margin: 0 auto;
        }

        .article-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #333;
        }

        .article-header h1 {
            color: #00ffff;
            margin: 0;
            font-size: 1.8rem;
        }

        .article-content {
            line-height: 1.6;
        }

        .article-content h1,
        .article-content h2,
        .article-content h3 {
            color: #00ffff;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        .article-content p {
            margin-bottom: 1rem;
        }

        .article-content a {
            color: #00ff00;
            text-decoration: none;
        }

        .article-content a:hover {
            text-decoration: underline;
        }

        .article-content pre {
            background: #2a2a2a;
            border: 1px solid #333;
            border-radius: 3px;
            padding: 1rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        .article-content code {
            background: #2a2a2a;
            border: 1px solid #333;
            border-radius: 2px;
            padding: 0.2rem 0.4rem;
            font-family: 'Courier New', monospace;
        }

        .article-content pre code {
            background: none;
            border: none;
            padding: 0;
        }

        @media (max-width: 768px) {
            .blog-sidebar {
                width: 100%;
                right: -100%;
            }
            
            .container.sidebar-open {
                margin-right: 0;
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Noryve Freeman</h1>
            <div class="subtitle">I build things and love configs</div>
        </div>

        <div class="navbar">
            <div class="tab active" data-tab="about">About</div>
            <div class="tab" data-tab="blog">Blog</div>
            <div class="tab" data-tab="books">Books</div>
            <div class="tab" data-tab="awesome-links">Awesome Links</div>
            <div class="tab" data-tab="configs">Configs</div>
            <div class="tab" data-tab="projects">Projects</div>
        </div>

        <div class="tab-content active" id="about">
            <div class="section">
                <h2>About</h2>
                <div id="about-content">
                    <!-- Content will be generated by JavaScript -->
                </div>
            </div>
        </div>

        <div class="tab-content" id="blog">
            <div class="section">
                <h2>Blog</h2>
                <p>Recent thoughts and writings:</p>
                <ul id="blog-content">
                    <!-- Content will be generated by JavaScript -->
                </ul>
            </div>
        </div>

        <div class="tab-content" id="books">
            <div class="section">
                <h2>Books</h2>
                <div id="books-content">
                    <!-- Content will be generated by JavaScript -->
                </div>
            </div>
        </div>

        <div class="tab-content" id="awesome-links">
            <div class="section">
                <h2>Awesome Links</h2>
                <p>Resources, tools, and sites I find valuable:</p>
                <ul id="awesome-links-content">
                    <!-- Content will be generated by JavaScript -->
                </ul>
            </div>
        </div>

        <div class="tab-content" id="configs">
            <div class="section">
                <h2>Configs</h2>
                <p>Configuration snippets and dotfiles:</p>
                <ul id="configs-content">
                    <!-- Content will be generated by JavaScript -->
                </ul>
            </div>
        </div>

        <div class="tab-content" id="projects">
            <div class="section">
                <h2>Projects</h2>
                <p>My personal projects and contributions:</p>
                <ul id="projects-content">
                    <!-- Content will be generated by JavaScript -->
                </ul>
            </div>
        </div>
    </div>

    <!-- Blog Article Sidebar -->
    <div class="blog-sidebar" id="blogSidebar">
        <div class="sidebar-header">
            <h3 id="sidebarTitle">Article Title</h3>
            <div class="sidebar-controls">
                <button id="fullscreenBtn" class="sidebar-btn">Fullscreen</button>
                <button id="closeSidebarBtn" class="sidebar-btn">Close</button>
            </div>
        </div>
        <div class="sidebar-content" id="sidebarContent">
            Loading...
        </div>
    </div>

    <script>
        // Website functionality
        class Website {
            constructor() {
                this.sections = ['about', 'blog', 'books', 'awesome-links', 'configs', 'projects'];
                this.currentSection = 0;

                // Data loaded from pages.json
                this.pagesData = null;
                this.books = null;
                this.awesomeLinks = null;
                this.configs = null;

                // Blog configuration
                this.blogPosts = [];
                this.blogIndexUrl = "https://raw.githubusercontent.com/noryve-03/blog/master/index.txt";
                this.blogBaseUrl = "https://raw.githubusercontent.com/noryve-03/blog/master/";

                // Projects configuration
                this.projects = [];
                this.projectsUrl = "https://raw.githubusercontent.com/noryve-03/blog/master/projects/projects.json";
                this.projectsBaseUrl = "https://raw.githubusercontent.com/noryve-03/blog/master/projects/";
                this.currentBlogArticle = null;
                this.currentConfig = null;

                this.loadPagesData().then(() => {
                    this.init();
                });
            }

            async loadPagesData() {
                try {
                    const response = await fetch('pages.json');
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    this.pagesData = await response.json();
                    
                    // Set references to data sections
                    this.books = this.pagesData.books;
                    this.awesomeLinks = this.pagesData.awesomeLinks;
                    this.configs = this.pagesData.configs.files;
                    
                } catch (error) {
                    console.error('Error loading pages data:', error);
                    // Set fallback data
                    this.books = { read2025: [], currentlyReading: [] };
                    this.awesomeLinks = { categories: {} };
                    this.configs = [];
                }
            }

            generateContent() {
                this.generateAboutContent();
                this.generateBlogContent();
                this.generateBooksContent();
                this.generateAwesomeLinksContent();
                this.generateConfigsContent();
                this.generateProjectsContent();
            }

            // Utility functions for cleaner code
            createElement(tag, className = '', innerHTML = '') {
                const element = document.createElement(tag);
                if (className) element.className = className;
                if (innerHTML) element.innerHTML = innerHTML;
                return element;
            }

            createLinkItem(item, target = '_blank') {
                const li = this.createElement('li');
                const authorText = item.author ? ` - ${item.author}` : '';
                const description = item.description ? ` - ${item.description}` : '';
                li.innerHTML = `<a href="${item.url}" class="link" target="${target}">${item.title}</a>${authorText}${description}`;
                return li;
            }

            showLoadingState(containerId, message = 'Loading...') {
                const container = document.getElementById(containerId);
                if (container) {
                    container.innerHTML = `<p>${message}</p>`;
                }
            }

            showErrorState(containerId, message = 'Error loading content') {
                const container = document.getElementById(containerId);
                if (container) {
                    container.innerHTML = `<p style="color: #ff6b6b;">${message}</p>`;
                }
            }

            generateAboutContent() {
                const aboutContainer = document.getElementById('about-content');
                if (this.pagesData && this.pagesData.about) {
                    aboutContainer.innerHTML = this.pagesData.about.content;
                } else {
                    aboutContainer.innerHTML = '<p>Loading about content...</p>';
                }
            }

            async generateBlogContent() {
                const blogContainer = document.getElementById('blog-content');
                this.showLoadingState('blog-content', 'Loading blog posts...');
                
                try {
                    await this.loadBlogIndex();
                    blogContainer.innerHTML = '';
                    
                    if (this.blogPosts.length === 0) {
                        blogContainer.innerHTML = '<p>No blog posts found.</p>';
                        return;
                    }
                    
                    const ul = this.createElement('ul');
                    this.blogPosts.forEach(post => {
                        const li = this.createElement('li', 'blog-file-item');
                        li.innerHTML = `<span class="link">${post.title}</span>`;
                        li.addEventListener('click', () => this.openBlogArticle(post));
                        ul.appendChild(li);
                    });
                    blogContainer.appendChild(ul);
                    
                } catch (error) {
                    this.showErrorState('blog-content', 'Error loading blog posts. Please try again later.');
                    console.error('Error loading blog:', error);
                }
            }

            async loadBlogIndex() {
                try {
                    const response = await fetch(this.blogIndexUrl);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const indexText = await response.text();
                    
                    this.blogPosts = [];
                    const lines = indexText.trim().split('\n');
                    
                    lines.forEach(line => {
                        if (line.trim()) {
                            const filename = line.trim();
                            const title = filename.replace('.md', '').replace(/[-_]/g, ' ');
                            this.blogPosts.push({
                                title: title,
                                filename: filename,
                                url: this.blogBaseUrl + filename
                            });
                        }
                    });
                } catch (error) {
                    console.error('Error loading blog index:', error);
                    // Fallback to sample data
                    this.blogPosts = [
                        { title: "Welcome", filename: "welcome.md", url: this.blogBaseUrl + "welcome.md" }
                    ];
                }
            }

            async openBlogArticle(post) {
                this.currentBlogArticle = post;

                // Update URL for direct linking
                const blogUrl = `${window.location.origin}${window.location.pathname}?blog=${encodeURIComponent(post.filename)}`;
                window.history.pushState({}, '', blogUrl);

                // Update sidebar title
                document.getElementById('sidebarTitle').textContent = post.title;

                // Show loading state
                document.getElementById('sidebarContent').innerHTML = '<p>Loading article...</p>';

                // Show sidebar
                document.getElementById('blogSidebar').classList.add('active');
                document.querySelector('.container').classList.add('sidebar-open');

                // Ensure sidebar content is scrollable with mouse
                const sidebarContent = document.getElementById('sidebarContent');
                if (sidebarContent) {
                    sidebarContent.style.overflowY = 'auto';
                    sidebarContent.scrollTop = 0; // Reset scroll position
                }

                try {
                    const response = await fetch(post.url);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const markdown = await response.text();

                    // Convert markdown to HTML (basic conversion)
                    const html = this.markdownToHtml(markdown);
                    document.getElementById('sidebarContent').innerHTML = html;

                } catch (error) {
                    document.getElementById('sidebarContent').innerHTML = '<p>Error loading article. Please try again later.</p>';
                    console.error('Error loading article:', error);
                }
            }

            markdownToHtml(markdown) {
                // Use Marked.js for proper markdown parsing
                try {
                    // Configure marked for security and features
                    marked.setOptions({
                        breaks: true,
                        gfm: true,
                        sanitize: false,
                        smartLists: true,
                        smartypants: true
                    });
                    
                    // Use marked to parse markdown
                    return marked.parse(markdown);
                } catch (error) {
                    console.error('Error parsing markdown:', error);
                    // Fallback to plain text if parsing fails
                    return `<pre>${markdown}</pre>`;
                }
            }

            openConfigFile(config) {
                this.currentConfig = config;

                // Update sidebar title
                document.getElementById('sidebarTitle').textContent = config.title;

                // Show sidebar
                document.getElementById('blogSidebar').classList.add('active');
                document.querySelector('.container').classList.add('sidebar-open');

                // Ensure sidebar content is scrollable with mouse
                const sidebarContent = document.getElementById('sidebarContent');
                if (sidebarContent) {
                    sidebarContent.style.overflowY = 'auto';
                    sidebarContent.scrollTop = 0; // Reset scroll position
                }

                // Display config content with syntax highlighting
                const formattedContent = this.formatConfigContent(config.content, config.type);
                document.getElementById('sidebarContent').innerHTML = formattedContent;
            }

            formatConfigContent(content, type) {
                // Basic syntax highlighting for different config types
                let formattedContent = content.replace(/</g, '&lt;').replace(/>/g, '&gt;');
                
                // Apply basic syntax highlighting based on type
                switch(type) {
                    case 'shell':
                        formattedContent = formattedContent
                            .replace(/^(#.*$)/gm, '<span style="color: #6A9955;">$1</span>')
                            .replace(/^(export\s+\w+=[^#]*)/gm, '<span style="color: #569CD6;">$1</span>')
                            .replace(/^(alias\s+[^=]+=[^#]*)/gm, '<span style="color: #C586C0;">$1</span>');
                        break;
                    case 'tmux':
                        formattedContent = formattedContent
                            .replace(/^(#.*$)/gm, '<span style="color: #6A9955;">$1</span>')
                            .replace(/^(set\s+[^#]*)/gm, '<span style="color: #569CD6;">$1</span>')
                            .replace(/^(run\s+[^#]*)/gm, '<span style="color: #C586C0;">$1</span>');
                        break;
                    case 'lua':
                        formattedContent = formattedContent
                            .replace(/^(--.*$)/gm, '<span style="color: #6A9955;">$1</span>')
                            .replace(/\b(local|require|return|if|then|else|end|function)\b/g, '<span style="color: #569CD6;">$1</span>')
                            .replace(/["']([^"']*?)["']/g, '<span style="color: #CE9178;">"$1"</span>');
                        break;
                    case 'hyprland':
                        formattedContent = formattedContent
                            .replace(/^(#.*$)/gm, '<span style="color: #6A9955;">$1</span>')
                            .replace(/^(exec-once\s*=|source\s*=|\$\w+\s*=)/gm, '<span style="color: #569CD6;">$1</span>')
                            .replace(/(\$\w+)/g, '<span style="color: #4EC9B0;">$1</span>');
                        break;
                }
                
                return `<pre><code>${formattedContent}</code></pre>`;
            }

            generateBooksContent() {
                const booksContainer = document.getElementById('books-content');
                booksContainer.innerHTML = '';
                
                if (!this.books) {
                    booksContainer.innerHTML = '<p>Loading books...</p>';
                    return;
                }
                
                // Books read in 2025
                const read2025Section = this.createElement('div', '', '<p>Books I read in 2025</p>');
                const read2025List = this.createElement('ul');
                
                this.books.read2025.forEach(book => {
                    read2025List.appendChild(this.createLinkItem(book));
                });
                
                read2025Section.appendChild(read2025List);
                booksContainer.appendChild(read2025Section);
                
                // Currently reading
                const currentlyReadingSection = this.createElement('div', '', '<p>Currently reading or not finished:</p>');
                const currentlyReadingList = this.createElement('ul');
                
                this.books.currentlyReading.forEach(book => {
                    currentlyReadingList.appendChild(this.createLinkItem(book));
                });
                
                currentlyReadingSection.appendChild(currentlyReadingList);
                booksContainer.appendChild(currentlyReadingSection);
            }

            generateAwesomeLinksContent() {
                const awesomeLinksContainer = document.getElementById('awesome-links-content');
                awesomeLinksContainer.innerHTML = '';
                
                if (!this.awesomeLinks || !this.awesomeLinks.categories) {
                    awesomeLinksContainer.innerHTML = '<p>Loading awesome links...</p>';
                    return;
                }
                
                // Generate sections dynamically from categories
                Object.entries(this.awesomeLinks.categories).forEach(([key, category]) => {
                    const section = this.createElement('div', '', `<h3>${category.title}</h3>`);
                    const list = this.createElement('ul');
                    
                    category.links.forEach(link => {
                        list.appendChild(this.createLinkItem(link));
                    });
                    
                    section.appendChild(list);
                    awesomeLinksContainer.appendChild(section);
                });
            }

            generateConfigsContent() {
                const configsContainer = document.getElementById('configs-content');
                configsContainer.innerHTML = '';
                
                if (!this.configs || this.configs.length === 0) {
                    this.showLoadingState('configs-content', 'Loading configurations...');
                    return;
                }
                
                const ul = this.createElement('ul');
                this.configs.forEach(config => {
                    const li = this.createElement('li', 'config-file-item');
                    li.innerHTML = `<span class="link">${config.title}</span> - ${config.description}`;
                    li.addEventListener('click', () => this.openConfigFile(config));
                    ul.appendChild(li);
                });
                configsContainer.appendChild(ul);
            }

            async generateProjectsContent() {
                const projectsContainer = document.getElementById('projects-content');
                this.showLoadingState('projects-content', 'Loading projects...');
                
                try {
                    await this.loadProjects();
                    projectsContainer.innerHTML = '';
                    
                    if (this.projects.length === 0) {
                        projectsContainer.innerHTML = '<p>No projects found.</p>';
                        return;
                    }
                    
                    const ul = this.createElement('ul');
                    this.projects.forEach(project => {
                        const li = this.createElement('li', 'project-file-item');
                        const tagsHtml = project.tags && project.tags.length > 0 ? ` <span style="color: #666; font-size: 0.8em;">[${project.tags.join(', ')}]</span>` : '';
                        li.innerHTML = `<span class="link">${project.title}</span> - ${project.description}${tagsHtml}`;
                        li.addEventListener('click', () => this.openProjectArticle(project));
                        ul.appendChild(li);
                    });
                    projectsContainer.appendChild(ul);
                    
                } catch (error) {
                    this.showErrorState('projects-content', 'Error loading projects. Please try again later.');
                    console.error('Error loading projects:', error);
                }
            }

            async loadProjects() {
                try {
                    const response = await fetch(this.projectsUrl);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const projectsData = await response.json();
                    
                    this.projects = [];
                    
                    Object.entries(projectsData).forEach(([key, project]) => {
                        this.projects.push({
                            title: key,
                            description: project.description,
                            filename: project.markdown,
                            tags: project.tags || [],
                            url: this.projectsBaseUrl + project.markdown
                        });
                    });
                } catch (error) {
                    console.error('Error loading projects:', error);
                    this.projects = [];
                }
            }

            async openProjectArticle(project) {
                this.currentBlogArticle = project;

                // Update URL for direct linking
                const projectUrl = `${window.location.origin}${window.location.pathname}?project=${encodeURIComponent(project.filename)}`;
                window.history.pushState({}, '', projectUrl);

                // Update sidebar title
                document.getElementById('sidebarTitle').textContent = project.title;

                // Show loading state
                document.getElementById('sidebarContent').innerHTML = '<p>Loading project...</p>';

                // Show sidebar
                document.getElementById('blogSidebar').classList.add('active');
                document.querySelector('.container').classList.add('sidebar-open');

                // Ensure sidebar content is scrollable with mouse
                const sidebarContent = document.getElementById('sidebarContent');
                if (sidebarContent) {
                    sidebarContent.style.overflowY = 'auto';
                    sidebarContent.scrollTop = 0; // Reset scroll position
                }

                try {
                    const response = await fetch(project.url);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const markdown = await response.text();

                    // Convert markdown to HTML
                    const html = this.markdownToHtml(markdown);
                    document.getElementById('sidebarContent').innerHTML = html;

                } catch (error) {
                    document.getElementById('sidebarContent').innerHTML = '<p>Error loading project. Please try again later.</p>';
                    console.error('Error loading project:', error);
                }
            }

            init() {
                this.generateContent();
                this.bindTabEvents();
                this.bindSidebarEvents();
                this.handleUrlRouting();
                this.showTab('about');
            }

            bindTabEvents() {
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.addEventListener('click', (e) => {
                        this.showTab(e.target.dataset.tab);
                    });
                });
            }

            bindSidebarEvents() {
                document.getElementById('closeSidebarBtn').addEventListener('click', () => {
                    this.closeSidebar();
                });

                document.getElementById('fullscreenBtn').addEventListener('click', () => {
                    this.openFullscreen();
                });

                // Close sidebar when clicking outside
                document.addEventListener('click', (e) => {
                    const sidebar = document.getElementById('blogSidebar');
                    if (sidebar.classList.contains('active') && !sidebar.contains(e.target)) {
                        // Don't close if clicking on blog file items, config file items, or project file items
                        if (!e.target.closest('.blog-file-item') && !e.target.closest('.config-file-item') && !e.target.closest('.project-file-item')) {
                            this.closeSidebar();
                        }
                    }
                });
            }

            closeSidebar() {
                document.getElementById('blogSidebar').classList.remove('active');
                document.querySelector('.container').classList.remove('sidebar-open');
                this.currentBlogArticle = null;
                this.currentConfig = null;

                // Update URL to remove blog article
                window.history.pushState({}, '', window.location.pathname);
            }

            openFullscreen() {
                if (this.currentBlogArticle) {
                    const blogUrl = `${window.location.origin}${window.location.pathname}?blog=${encodeURIComponent(this.currentBlogArticle.filename)}`;
                    window.open(blogUrl, '_blank');
                }
            }

            handleUrlRouting() {
                const urlParams = new URLSearchParams(window.location.search);
                const blogParam = urlParams.get('blog');
                const projectParam = urlParams.get('project');
                
                if (blogParam) {
                    // Load blog in fullscreen mode
                    this.loadBlogIndex().then(() => {
                        const post = this.blogPosts.find(p => p.filename === blogParam);
                        if (post) {
                            this.showTab('blog');
                            this.openBlogFullscreen(post);
                        }
                    });
                }
                
                if (projectParam) {
                    // Load project in fullscreen mode
                    this.loadProjects().then(() => {
                        const project = this.projects.find(p => p.filename === projectParam);
                        if (project) {
                            this.showTab('projects');
                            this.openProjectFullscreen(project);
                        }
                    });
                }
            }

            async openBlogFullscreen(post) {
                this.currentBlogArticle = post;
                
                // Replace blog content with fullscreen article
                const blogContainer = document.getElementById('blog-content');
                blogContainer.innerHTML = '<p>Loading article...</p>';
                
                try {
                    const response = await fetch(post.url);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const markdown = await response.text();
                    
                    const html = this.markdownToHtml(markdown);
                    blogContainer.innerHTML = `
                        <div class="fullscreen-article">
                            <div class="article-header">
                                <h1>${post.title}</h1>
                                <button onclick="window.close()" class="sidebar-btn">Close</button>
                            </div>
                            <div class="article-content">
                                ${html}
                            </div>
                        </div>
                    `;
                    
                } catch (error) {
                    blogContainer.innerHTML = '<p>Error loading article. Please try again later.</p>';
                    console.error('Error loading article:', error);
                }
            }

            async openProjectFullscreen(project) {
                this.currentBlogArticle = project;
                
                // Replace projects content with fullscreen article
                const projectsContainer = document.getElementById('projects-content');
                projectsContainer.innerHTML = '<p>Loading project...</p>';
                
                try {
                    const response = await fetch(project.url);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const markdown = await response.text();
                    
                    const html = this.markdownToHtml(markdown);
                    projectsContainer.innerHTML = `
                        <div class="fullscreen-article">
                            <div class="article-header">
                                <h1>${project.title}</h1>
                                <button onclick="window.close()" class="sidebar-btn">Close</button>
                            </div>
                            <div class="article-content">
                                ${html}
                            </div>
                        </div>
                    `;
                    
                } catch (error) {
                    projectsContainer.innerHTML = '<p>Error loading project. Please try again later.</p>';
                    console.error('Error loading project:', error);
                }
            }

            showTab(tabName) {
                // Update current section index
                this.currentSection = this.sections.indexOf(tabName);

                // Hide all tab contents
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });

                // Remove active class from all tabs
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.classList.remove('active');
                });

                // Show selected tab content
                document.getElementById(tabName).classList.add('active');

                // Add active class to selected tab
                document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

                // Reset scroll position to top of tab
                window.scrollTo(0, 0);
            }

        }

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => new Website());
        } else {
            new Website();
        }
    </script>
</body>
</html>
